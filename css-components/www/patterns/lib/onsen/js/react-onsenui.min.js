/*! react-onsenui.js for onsenui - v2.0.0-beta.6 - 2016-02-29 */
"use strict";var ReactTestUtils=React.addons.TestUtils,createDialogClass=function(domName,showFun){var myClass={show:function(){this.node.firstChild.show()},hide:function(){this.node.firstChild.hide()},componentDidMount:function(){var _this=this;console.log("mounting"),this.node=document.createElement("div"),document.body.appendChild(this.node),this.node.addEventListener("cancel",function(){_this.props.onCancel()}),this.renderPortal(this.props)},componentWillReceiveProps:function(newProps){console.log("will receive pos"),newProps.isOpen!=this.props.isOpen&&(console.log("true"),this.animateShow=!0),this.renderPortal(newProps)},componentWillUnmount:function(){ReactDOM.unmountComponentAtNode(this.node),document.body.removeChild(this.node)},_update:function(){CustomElements.upgrade(this.node.firstChild),this.props.isOpen?(this.animateShow&&(console.log("show"),this.show()),this.animateShow=!1):this.hide()},renderPortal:function(props){var element=React.createElement(domName,props);ReactDOM.render(element,this.node,this._update)},shouldComponentUpdate:function(){return!1},render:function(){return console.log("myrender"),React.DOM.noscript()}};return showFun&&(myClass.show=showFun),React.createClass(myClass)},OnsAlertDialog=createDialogClass("ons-alert-dialog"),OnsDialog=createDialogClass("ons-dialog"),showFun=function(){var target=this.props.getTarget();return ReactTestUtils.isElement(target)&&(target=ReactDOM.findDOMNode(target)),this.node.firstChild.show(target)},OnsPopover=createDialogClass("ons-popover",showFun),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},OnsInput=React.createClass({displayName:"OnsInput",render:function(){return React.createElement("ons-input",{value:this.props.value,_compiled:""},React.createElement("input",_extends({className:"text-input"},this.props)),React.createElement("span",{className:"text-input__label",style:{color:"rgba(0, 0, 0, 0.498039)"}}," "))}}),util=window.ons._util,OnsNavigator=React.createClass({displayName:"OnsNavigator",componentDidMount:function(){this.counter=0;var node=this.node=ReactDOM.findDOMNode(this),page=this.props.children;if(this.init=!0,!reactUtil.rendersToOnsPage(page))throw new Error("OnsNavigator has to contain exactly one child that renders to ons-page");var lastLink=window.OnsNavigatorElement.rewritables.link;window.OnsNavigatorElement.rewritables.link=function(navigatorElement,target,options,callback){this.init?(this.init=!1,node.firstChild.innerHTML=node.firstChild._initialHTML,lastLink(navigatorElement,node.firstChild.children[0],options,callback)):(node.firstChild._pages[0].element=node.firstChild.children[0],lastLink(navigatorElement,target,options,callback))}.bind(this),this.elements=[],this.elements.push({elem:this.props.children}),this.myDom=ReactDOM.render(React.createElement("ons-navigator",this.props,page),node)},resetToPage:function(reactPage,options){var page=arguments.length>0?reactPage:this.elements[0].elem;this.elements=[],this.elements.push({elem:page});var node=this.node;this.node.firstChild.children[0].style.display="block";var htmlString=ReactDOMServer.renderToStaticMarkup(page);void 0==options&&(options={}),options.pageHTML=htmlString;for(var children=[],i=0;i<this.node.firstChild.children.length;i++)children.push(this.node.firstChild.children[i].cloneNode(!0));var node=this.node;this.node.firstChild.resetToPage("",options).then(function(){for(var newNode=node.firstChild.children[0],i=0;i<children.length;i++)children[i].style.display=0==i?"block":"none",node.firstChild.insertBefore(children[i],newNode);this.myDom=ReactDOM.render(React.createElement("ons-navigator",this.props,page),node),node.firstChild.removeChild(newNode),node.firstChild._pages[0].element=node.firstChild.children[0]}.bind(this))},popPage:function(options){var navNode=ReactDOM.findDOMNode(this).firstChild,lastChild=reactUtil.lastChild(this.node.firstChild).cloneNode(!0);navNode.popPage(options).then(function(){this.elements.pop();var help=[];lastChild.style.display="none","ONS-PAGE"==util.lastChild(navNode).nodeName?navNode.appendChild(lastChild):navNode.insertBefore(lastChild,util.lastChild(navNode));for(var i=0;i<this.elements.length;i++)help.push(this.elements[i].elem);var node=ReactDOM.findDOMNode(this);ReactDOM.render(React.createElement("ons-navigator",this.props,help),node)}.bind(this))},render:function(){return React.createElement("div",null)},componentWillReceiveProps:function(newProps){console.log("will receive props");var props=newProps||this.props,help=[];this.elements=[],this.elements.push({elem:props.children});for(var i=0;i<this.elements.length;i++)help.push(this.elements[i].elem);var node=ReactDOM.findDOMNode(this);console.log(this.elements.length),ReactDOM.render(React.createElement("ons-navigator",this.props,help),node)},replacePage:function(reactPage,options){var htmlString=ReactDOMServer.renderToStaticMarkup(reactPage);void 0==options&&(options={}),options.pageHTML=htmlString;var node=this.node,navNode=this.node.firstChild;this.elements.pop(),this.elements.push({elem:reactPage});for(var help=[],i=0;i<this.elements.length;i++)help.push(this.elements[i].elem);var deleteElem=navNode.children[navNode.children.length-1];this.node.firstChild.replacePage("",options).then(function(){var lastNode=navNode.children[navNode.children.length-1];navNode.insertBefore(deleteElem,navNode.children[navNode.children.length-1]);var index=(ReactDOM.render(React.createElement("ons-navigator",this.props,help),node),navNode.children.length-2);navNode.children[index].style.display="block",navNode._pages[index].element=node.firstChild.children[index],navNode.removeChild(lastNode)}.bind(this))},insertComponent:function(reactPage,insertPos,options){var htmlString=ReactDOMServer.renderToStaticMarkup(reactPage);void 0==options&&(options={}),options.pageHTML=htmlString,this.counter++;var node=ReactDOM.findDOMNode(this),navNode=node.firstChild;if(insertPos=node.firstChild._normalizeIndex(insertPos),!reactUtil.rendersToOnsPage(reactPage))throw new Error("The component that react inserts needs to render to <ons-page>");this.elements.splice(insertPos,0,{elem:reactPage});for(var help=[],i=0;i<this.elements.length;i++)help.push(this.elements[i].elem);this.counter,this.elements;node.firstChild.insertPage(insertPos,"",options).then(function(){navNode.removeChild(navNode.children[insertPos]);for(var i=(ReactDOM.render(React.createElement("ons-navigator",this.props,help),node),0);i<navNode.children.length-1;i++)navNode.children[i].style.display="none";for(var i=0;i<navNode.children.length;i++)navNode._pages[i].element=navNode.children[i]}.bind(this))},pushComponent:function(reactPage,options){if(!reactUtil.rendersToOnsPage(reactPage))throw new Error("The component that react pushes needs to render to <ons-page>");var htmlString=ReactDOMServer.renderToStaticMarkup(reactPage);void 0==options&&(options={}),options.pageHTML=htmlString,this.elements.push({elem:reactPage});var elements=this.elements;console.log("push length: "+this.elements.length);var node=ReactDOM.findDOMNode(this);node.firstChild._pushPage(options).then(function(){for(var help=[],i=0;i<elements.length;i++)help.push(elements[i].elem);var node2=ReactDOM.render(React.createElement("ons-navigator",this.props,help),node);node2._pages[elements.length-1].element=node2.children[elements.length-1],node2.removeChild(node2.children[elements.length])}.bind(this))}}),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},OnsPage=React.createClass({displayName:"OnsPage",render:function(){var toolbar,modal,otherChildren=[];return React.Children.forEach(this.props.children,function(child){null!=child&&(reactUtil.rendersToOnsToolbar(child)?toolbar=child:reactUtil.rendersToOnsModal(child)?modal=child:otherChildren.push(child))}),React.createElement("ons-page",_extends({},this.props,{_compiled:"true"}),toolbar,React.createElement("div",{className:"page__background"}," "),React.createElement("div",{className:"page__content"},otherChildren),React.createElement("div",{className:"page__extra",style:{zIndex:10001}},modal))}}),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},OnsTabbar=React.createClass({displayName:"OnsTabbar",componentDidMount:function(){},setActiveTab:function(index,options){ReactDOM.findDOMNode(this).setActiveTab(index,options)},getActiveTabIndex:function(){return ReactDOM.findDOMNode(this).getActiveTabIndex()},shouldComponentUpdate:function(){return!1},render:function(){var lastReady=window.OnsTabbarElement.rewritables.ready;window.OnsTabbarElement.rewritables.ready=function(node,callback){for(var i=0;i<node.children[1].children.length;i++)node.children[1].children[i]._pageElement=node.firstChild.children[i];for(var i=0;i<node.firstChild.children.length;i++)node.firstChild.children[i].style.display="none";lastReady(node,callback)};var children=[];this.childIndex=[];var newModifier=this.props.modifier,self=this;self.activeIndex=-1;var index=-1;React.Children.forEach(this.props.children,function(child){index++,child=React.cloneElement(child,{modifier:newModifier}),counter=-1;var myChildren=React.Children.map(child.props.children,function(child2){return counter++,React.cloneElement(child2,{"data-ons-react":counter})});this.childIndex.push(child.props.page),child.props.active&&(self.activeIndex=index);var mychild=React.cloneElement(child,{},myChildren),renderString=ReactDOMServer.renderToStaticMarkup(mychild),el=document.createElement("div");el.innerHTML=renderString,CustomElements.upgrade(el.firstChild);var newElement=buildComponent(el.firstChild,React.Children.toArray(child.props.children));children.push(newElement)}.bind(this));var newNode=React.cloneElement(this,{},null),renderString=ReactDOMServer.renderToStaticMarkup(React.createElement("ons-tabbar",newNode.props,children)),el=document.createElement("div");el.innerHTML=renderString,CustomElements.upgrade(el.firstChild);var contentClass=el.firstChild.children[0].className,barClass=el.firstChild.children[1].className;return this.activeIndex=self.activeIndex,React.createElement("ons-tabbar",_extends({},newNode.props,{_compiled:"true"}),React.createElement("div",{"no-status-bar-fill":!0,className:contentClass},this.props.pages),React.createElement("div",{className:barClass},children))}}),buildComponent=function buildComponent(domElement,reactChildren){if(domElement.hasAttribute("data-ons-react")){var index=parseInt(domElement.getAttribute("data-ons-react"));return reactChildren[index]}for(var children=[],i=0;i<domElement.children.length;i++)children.push(buildComponent(domElement.children[i],reactChildren));return children.length>0?React.createElement(MyElem,{domNode:domElement,myClass:domElement.className,styleString:domElement.style.cssText},children):React.createElement(MyElem,{domNode:domElement,myClass:domElement.className,styleString:domElement.style.cssText})},OnsTab=React.createClass({displayName:"OnsTab",render:function(){return React.createElement("ons-tab",this.props," ",this.props.children," ")}}),MyElem=React.createClass({displayName:"MyElem",render:function(){for(var obj={_compiled:"true"},elem=this.props.domNode,i=0;i<elem.attributes.length;i++){var attrib=elem.attributes[i];if("class"==attrib.name)obj.className=attrib.value,obj["class"]=attrib.value;else if("label"==attrib.name)obj.label=attrib.value;else if("active"==attrib.name)obj.active=attrib.value;else if("icon"==attrib.name)obj.icon=attrib.value;else if("type"==attrib.name)obj.type=attrib.value;else if("style"==attrib.name){for(var style=attrib.value,parts=style.split(";"),styleObj={},i=0;i<parts.length;i++){var subParts=parts[i].split(":");if(subParts[0]=subParts[0].trim(),0!=subParts[0].length)if("display"==subParts[0])styleObj.display=subParts[1];else if("font-size"==subParts[0])styleObj.fontSize=subParts[1];else if("line-height"==subParts[0])styleObj.lineHeight=subParts[1];else{if("vertical-align"!=subParts[0])throw new Error("."+subParts[0]+".");styleObj.verticalAlign=subParts[1]}}obj.style=styleObj}}var str=elem.innerHTML;return!this.props.children&&str.length>0?React.createElement(this.props.domNode.nodeName.toLowerCase(),obj,str):React.createElement(this.props.domNode.nodeName.toLowerCase(),obj,this.props.children)}}),OnsTemplate=React.createClass({displayName:"OnsTemplate",componentDidMount:function(){reactUtil.templateMap[this.props.id]=this},render:function(){return React.createElement("ons-template",{type:"text/ons-template",id:this.props.id},this.props.children)}}),ReactTestUtils=React.addons.TestUtils,reactUtil={};reactUtil.rendersToOnsPage=function(obj){var htmlString=ReactDOMServer.renderToStaticMarkup(obj);return htmlString.startsWith("<ons-page")},reactUtil.rendersToOnsToolbar=function(obj){var htmlString=ReactDOMServer.renderToStaticMarkup(obj);return htmlString.startsWith("<ons-toolbar")},reactUtil.rendersToOnsModal=function(obj){var htmlString=ReactDOMServer.renderToStaticMarkup(obj);return htmlString.startsWith("<ons-modal")},reactUtil.lastChild=function(el){return el.children[el.children.length-1]},reactUtil.createCustomDialog=function(component){var body=document.body,container=document.createElement("div");return body.appendChild(container),new Promise(function(resolve){ReactDOM.render(component,container,function(){resolve(container.firstChild)})})},reactUtil.templateMap={};